// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs
// ER schema based on the provided image

Table users {
  id int [pk, increment]
  email varchar
  password varchar
  role varchar
}

Table laboratories {
  id int [pk, increment]
  name varchar
  referent varchar
}

Table lab_ghginventory {
  id int [pk, increment]   
  laboratory int      // FK -> laboratories.id
  year int
  created timestamp
  nb_researcher int
  nb_teacher int
  nb_postdoc int
  nb_docasssitant int
  nb_admin int
  nb_apprenti int
  nb_student int
  submitted boolean
}

Table module_infrastructur {
  id int [pk, increment]
  name varchar
  room varchar
  floor_area float
  heating float
  cooling float
  ventilation float
  light float
  ghgi int   
  direct_emission int             // FK -> ghginventory.id
          // FK -> laboratories.id
}

Table sub_module_building_direct_emission {
  id int [pk, increment]
  unit varchar
  amount float
  heating_type float
  ghgi int                 // FK -> ghginventory.id
          // FK -> laboratories.id
}



Table module_electric_consumption_equipment {
  id int [pk, increment]
  name varchar
  category varchar
  class varchar
  subclass varchar
  activ_use int
  passiv_use int
  activ_power int
  passiv_power int
  ghgi int                  // FK -> ghginventory.id
}





Table module_travel {
  id int [pk, increment]
  ghgi int                  // FK -> ghginventory.id
  distance float
  mode varchar
  round_trip boolean
  amount int
  start_city varchar
  traveler varchar

}

Table module_achat_article{
  id int [pk, increment]
  ghgi int                  // FK -> ghginventory.id
  name varchar
  price float
  currency varchar
  amount int
  total_price float
  UNSPSC int
  NACRES varchar
  libelle_FR varchar
  code_centre_de_cout varchar
  supplier varchar
}
//// Relationships (foreign keys)
Ref: laboratories.referent > users.id
Ref: lab_ghginventory.laboratory > laboratories.id

Ref: module_electric_consumption_equipment.ghgi > lab_ghginventory.id

Ref: module_infrastructur.ghgi > lab_ghginventory.id
Ref: module_infrastructur.direct_emission > sub_module_building_direct_emission.ghgi





Ref: module_travel.ghgi > lab_ghginventory.id
